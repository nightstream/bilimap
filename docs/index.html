<!DOCTYPE html>
<html>
<head>
    <title>帮助</title>
    <meta charset="utf-8">
    <style type="text/css" media="screen">
        #container {margin: 0 auto; width: 65%; padding: 20px; background-color: ghostwhite;}
        #container .instro {font-size: 14px; color: #b3b3b3; text-indent: 2em;}
        #container hr {border-color: #e2dcdc;}
        #container .row {padding: 15px; text-indent:2em;}
        h1, h3 {text-indent: 0em;}
        h3 {font-size: 1.5em;}
        h5 {font-size: 18px;}
        h6 {font-size: 16px; margin: 25px 0;}
        ul {
            padding: 10px;
            background-color: whitesmoke;
        }
        ul li {
            list-style-type: none; 
            border-bottom: 1px black dashed;
        }
        .sideitem {
            display: inline-block;
            width: 50%;
            height: 100%;
        }
        div.l-side {
            float: left;
        }
        div.r-side {
            float: right;
        }
        .imgif {
            width: 530px;
            border: solid 3px #bfbfbf;
        }

        .intentmore {text-indent: 4em;}
        .sideitem code {
            background-color: darkgray;
            border-radius: 3px;
            padding: 15px;
            margin-left: 65px;
            text-indent: 0;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="row">
            <h1 style="font-size: 36px;">Bilimap文档</h1>
            <p>
                bilimap是一个浏览器插件，bilimap的主要功能是：利用B站（<a href="https://www.bilibili.com/">bilibili</a>）良好的弹幕生态系统，在B站视频页面生成弹幕图表，展示符合特定规则的弹幕在某一时刻的数量。
            </p>
            <img style="margin: 0 auto; display: block;" src="./images/0_charts.png" alt="弹幕图表">
        </div>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" color=#987cb9 SIZE=1>
        <div class="row">
            <h3>一、说明</h3>
            <p>bilimap 作为一个浏览器插件，目前只在B站的普通视频、番剧、电影等视频页面有效，不支持直播页面的弹幕。</p>
            <p>bilimap只与B站服务器存在网络交互，不会向任何B站和其他服务器上传用户的个人信息，用户的所有设置全部保存在本地浏览器端。</p>
            <p>当您从浏览器删除bilimap时，浏览器将清空您对bilimap的所有设置，即使重新安装bilimap，之前的设置无法找回，您可以在卸载bilimap前导出您的设置。</p>
            <p>由于每条弹幕大概会在页面停留6秒时间，并且同一弹幕可能多次匹配同一项规则，所以bilimap生成的图表只能粗略展示视频某时刻的同屏弹幕条数，并非视频实际的总弹幕数量。</p>
            <p><span style="font-weight: bolder;">注意：</span>bilimap会修改B站视频页面的右键菜单，添加新的菜单项（功能入口），并且根据用户的操作，bilimap会修改B站页面的展示内容（添加图表），请明确知晓。</p>
        </div>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" color=#987cb9 SIZE=1>
        <div class="row">
            <h3>二、安装方式</h3>
            <div>
                <h5>chrome</h5>
                <p>您可以使用chrome浏览器访问bilimap的chrome<a href="https://chrome.google.com/webstore/detail/bilimap/akmhahadmmjoidckjonlcbepkaloihed">商店页面</a>点击“添加至chrome”直接安装(<span style="font-weight: bolder;">版本略低，有些新功能可能不支持</span>)</p>
                <p>或者下载github库到电脑，开启chrome浏览器的“开发者模式”后，点击“加载已解压的扩展程序”，加载版本库内的src目录(<span style="font-weight: bolder;">chrome官方不推荐</span>)</p>
            </div>
            <div>
                <h5>firefox</h5>
                <p>推荐您使用firefox浏览器访问bilimap的add-ons<a href="https://addons.mozilla.org/zh-CN/firefox/addon/bilimap/">产品页面</a>, 点击“添加到firefox”直接安装(<span style="font-weight: bolder;">版本略低，有些新功能可能不支持</span>)</p>
            </div>
        </div>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" color=#987cb9 SIZE=1>
        <div class="row">
            <h3>三、功能介绍</h3>
            <div>
                <h5>主要功能. 弹幕图表</h5>
                <p>弹幕图表功能依赖用户设置的<a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1700215?fr=aladdin" title="正则表达式概念">正则表达式</a>。正则表达式是对字符串操作的一种逻辑公式，多用于过滤、检索、替换那些符合某个模式(规则)的文本，关于正则表达式的更多详细信息请参考<a href="https://www.runoob.com/regexp/regexp-syntax.html" title="正则表达式教程">学习正则表达式</a>。</p>
                <ul>
                    <li>
                        <h6>1.添加弹幕规则</h6>
                        <div class="sideitem r-side">
                            <p><img class="imgif" src="./images/1_addrule.gif" alt="添加弹幕规则"></p>
                        </div>
                        <div class="sideitem l-side">
                            <p><b>1)</b>. 点击浏览器地址栏右侧的bilimap的图标，会弹出一个展示页面</p>
                            <p><b>2)</b>. 页面上存在两个输入框，按输入框提示的信息输入您设定的规则名和正则表达式。</p>
                            <p><b>3)</b>. 按下回车后，页面将新增一条记录，同时bilimap会将数据保存到浏览器。</p>
                        </div>
                        <div style="clear: both;"></div>
                    </li>
                    <li>
                        <h6>2.查看和修改弹幕规则</h6>
                        <div class="sideitem r-side">
                            <p><img class="imgif" src="./images/2_editrule.gif" alt="查看和修改弹幕规则"></p>
                        </div>
                        <div class="sideitem l-side">
                            <!-- <p><b>* bilimap不支持同名规则</b>，如果您尝试添加一条同名规则，原有的规则将被覆盖。</p> -->
                            <p><b>1)</b>. 点击浏览器地址栏右侧的bilimap的图标，弹出展示页面。</p>
                            <p><b>2)</b>. 点击已存在的任何规则的规则名，相应的信息会展示在页面下方的输入框。</p>
                            <p><b>3)</b>. 您可以对输入框的内容进行修改后再次按下回车提交，原规则将会被覆盖。</p>
                            <p><b>4)</b>. 如果您变更了规则的名称，bilimap将认为您新增了一条规则，您可以手动删除原有的规则。</p>
                        </div>
                        <div style="clear: both;"></div>
                    </li>
                    <li>
                        <h6>3.导入导出弹幕规则</h6>
                        <div class="sideitem r-side">
                            <p><img class="imgif" src="./images/3_imptrule.gif" alt="导入导出弹幕规则"></p>
                        </div>
                        <div class="sideitem l-side">
                            <p><b style="color: #ff2e2e;">*注意！</b>由于firefox57版本之后官方已取消插件对blob对象的支持，所以目前导入导出弹幕规则的功能<b>无法在firefox使用。</b></p>
                            <p><b>1)</b>. 点击浏览器地址栏右侧的bilimap的图标，弹出展示页面。</p>
                            <p><b>2)</b>. 点击标题“弹幕规则”，页面下方将滑出“导入”“导出”按钮，点击其中的“导入”按钮。</p>
                            <p> 此时您可以： </p>
                            <p class="intentmore"> ①. 点击其中的“导入”按钮。 </p> 
                            <p class="intentmore"> ②. 在弹出文件资源管理器选择要导入的文件并点击“确认”或“打开”。</p> 
                            <p class="intentmore"> ③. 文件中包含的弹幕规则将展示到弹出框中。</p> 
                            <p>或者：</p> 
                            <p class="intentmore"> ①. 点击其中的“导出”按钮</p> 
                            <p class="intentmore"> ②. 浏览器将生成一个dmreg格式的文本文件并自动下载</p> 
                            <p class="intentmore"> ③. 文件可使用记事本打开，内容格式如下:</p> 
                            <code>
                                高能: (高能|核能|预警|经费|预算|特效|炸裂)<br/>
                                卖萌: (23+|awsl|高萌|卖萌|我死了|阿伟|医疗兵|血包)<br/>
                                搞笑: (23+|hh+|xswl|哈哈+|万恶之源|场面|不愧是|红红火)<br/>
                                恰饭: (恰饭|硬广|广告|猝不及防)<br/>
                            </code>
                            <p class="intentmore"> 您可以将以上文本以utf8格式保存为".txt"或".dmreg"文件后进行导入。</p>
                        </div>
                        <div style="clear: both;"></div>
                    </li>
                    <li style="border-bottom: 0px;">
                        <h6>4.生成弹幕图表</h6>
                        <div class="sideitem r-side">
                            <p><img class="imgif" src="./images/4_getchart.gif" alt="生成弹幕图表"></p>
                        </div>
                        <div class="sideitem l-side">
                            <p><b>1)</b>. 确认bilimap的规则展示页面上存在已勾选的规则</p>
                            <p><b>2)</b>. 从B站视频页面点击鼠标右键，调出右键菜单</p>
                            <p><b>3)</b>. 点击“bilimap”菜单项的子菜单项“展示弹幕地图”</p>
                            <p><b>4)</b>. 当前页面的视频播放器下方会出现弹幕图表</p>
                            <p><b>5)</b>. 在图表中移动鼠标，可以看到对应横坐标时间点上各类弹幕的条。</p>
                            <p><b>6)</b>. 在图表上点击鼠标时，当前页面视频会自动跳到对应横坐标时间点上的进度继续播放。</p>
                        </div>
                        <div style="clear: both;"></div>
                    </li>
                </ul>
            </div>
            <div>
                <h5>附加功能一. 获取B站视频封面</h5>
                <div class="sideitem l-side">
                    <p>1. 从B站视频页面点击鼠标右键，调出右键菜单</p>
                    <p>2. 点击“bilimap”菜单项的子菜单项“获取封面图片”</p>
                    <p>3. 浏览器将自动下载视频封面图片。</p>
                </div>
                <div class="sideitem r-side">
                    <p><img class="imgif" src="./images/p1_getcover.gif" alt="获取封面"></p>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div>
                <h5>附加功能二. 获取B站部分视频AV号</h5>
                <div class="sideitem l-side">
                    <p>1. 从B站视频页面点击鼠标右键，调出右键菜单</p>
                    <p>2. 点击“bilimap”菜单项的子菜单项“地址栏展示av号码链接”</p>
                    <p>3. 浏览器将自动把地址栏中的链接转换成av号码格式。</p>
                </div>
                <div class="sideitem r-side">
                    <p><img class="imgif" src="./images/p2_getavno.gif" alt="获取av号"></p>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div>
                <h5>附加功能三. 跳转到bilibili</h5>
                <div class="sideitem l-side">
                    <p>1. 在浏览器地址栏输入bav后按下tab键</p>
                    <p>2. 输入B站av号（一串纯数字)</p>
                    <p>3. 选择地址栏展示出的视频地址，按回车访问</p>
                </div>
                <div class="sideitem r-side">
                    <p><img class="imgif" src="./images/p3_jumpav.gif" alt="跳转"></p>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div>
                <h5>附加功能四. 即时鬼畜</h5>
                <div class="sideitem l-side">
                    <p>当观看B站视频或电影、番剧时，可以使用快捷键ctrl+shift+alt+z使B站播放器强制循环某片段，本功能不支持直播视频。</p>
                    <p>1.在需要开始鬼畜循环的位置按下ctrl+shift+alt+z记录起始位置。</p>
                    <p>2.在需要结束鬼畜循环的位置再次按下ctrl+shift+alt+z记录结束位置，此时播放器将跳回起始位置开始播放，当进度条达到结束位置时播放器将重新跳回起始位置。</p>
                    <p>3.使用快捷键ctrl+shift+alt+x取消鬼畜设置，再次按下ctrl+shift+alt+z将重新记录鬼畜起始位置。</p>
                </div>
                <div class="sideitem r-side">
                    <p><img class="imgif" src="./images/p4_autotune.gif" alt="即时鬼畜"></p>
                </div>
                <div style="clear: both;"></div>
            </div>
        </div>
        <hr style="FILTER: progid:DXImageTransform.Microsoft.Shadow(color:#987cb9,direction:145,strength:15)" color=#987cb9 SIZE=1>
        <div class="row">
            <h3>四、其它</h3>
            <p>bilimap的主要开发环境是chrome和firefox，其它任何浏览器均未测试。</p>
            <p>bilimap的图标由<a href="https://logoly.pro/">logoly</a>生成，弹幕数据图表使用<a href="https://www.echartsjs.com/zh/index.html">echarts</a>生成，在bilimap中集成了<b>删减版</b>的echarts.min.js。</p>
            <p>本文档的动图使用<a href="https://www.screentogif.com/">screentogif</a>录制生成。</p>
        </div>
    </div>
</body>
</html>